<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd">
<suite name="Smoke Test Suite" verbose="0">
    <!-- 
    SMOKE TEST SUITE - Dynamic Tests across 10 Modules
    ===========================================================
    Purpose: Infrastructure health check + critical path validation + CRUD operations
    
    NOTE: This root XML runs ALL 42 S3 tests (all 5 environments).
    In CI/CD, the dashboard script runs per-env S3 XMLs based on branch:
    
    Branch → S3 Environment Mapping:
      dev/develop       → dev only         (10 S3 tests) → Total 35
      qa                → qa only          (10 S3 tests) → Total 35
      staging/stage     → staging only     (10 S3 tests) → Total 35
      prod              → prod only        (10 S3 tests) → Total 35
      production/main   → prod + bces-iq   (18 S3 tests) → Total 43
      bces-iq           → bces-iq only     (10 S3 tests) → Total 35
      unknown           → ALL environments (42 S3 tests) → Total 67
    
    Execution Order (Phase 1 - UI Checks, no login needed):
      Module 0 - S3 Drift Detection:  DYNAMIC (see branch mapping above, NO Appium)
      Module 1 - Authentication UI:    4 tests (Welcome, Input, CompanyCode, LoginUI)
      Module 2 - Site Selection UI:    3 tests (UI, Search, Dashboard Navigation)
      Module 3 - Asset UI:             2 tests (Fields, Validation)
      Module 4 - Location UI:          2 tests (Save State, Name Input)
      Module 5 - Connections UI:       2 tests (Header, List)
    
    Execution Order (Phase 2 - CRUD Operations, requires login):
      Module 6 - Login Flow:           1 test  (Full login → Dashboard)
      Module 7 - Asset CRUD:           4 tests (Create, Read, Update, Delete)
      Module 8 - Location CRUD:        4 tests (Create Building, Read List, Edit, Delete)
      Module 9 - Connection CRUD:      3 tests (Create, Verify in List, Delete)
    
    USAGE:
      Full smoke (all S3):   mvn test -DsuiteXmlFile=testng-smoke.xml
      S3 drift only (all):   mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-s3drift.xml
      S3 drift (qa only):    mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-s3drift-qa.xml
      S3 drift (prod+bces):  mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-s3drift-production.xml
      Login only:            mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-login.xml
      Asset CRUD only:       mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-asset-crud.xml
      Location CRUD only:    mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-location-crud.xml
      Connection CRUD only:  mvn test -DsuiteXmlFile=src/test/resources/smoke/testng-smoke-connection-crud.xml
    
    Individual module XMLs: src/test/resources/smoke/testng-smoke-*.xml
    Jira: ZP-774 (S3 Drift Detection)
    -->
    
    <listeners>
        <listener class-name="com.egalvanic.listeners.ConsoleProgressListener"/>
    </listeners>

    <!-- ============================================================ -->
    <!-- PHASE 1: UI CHECKS (no login needed) - 55 tests             -->
    <!-- ============================================================ -->

    <!-- Module 0: S3 Drift Detection (42 tests, NO Appium) -->
    <test name="Smoke - S3 Drift Detection">
        <classes>
            <class name="com.egalvanic.tests.S3BucketPolicyDriftTest"/>
        </classes>
    </test>

    <!-- Module 1: Authentication UI (4 tests) -->
    <test name="Smoke - Authentication UI">
        <classes>
            <class name="com.egalvanic.tests.AuthenticationTest">
                <methods>
                    <include name="TC01_verifyWelcomeScreenUILoads"/>
                    <include name="TC04_verifyCompanyCodeFieldAcceptsInput"/>
                    <include name="TC07_verifyValidCompanyCodeNavigatesToLogin"/>
                    <include name="TC16_verifyLoginScreenUIElements"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 2: Site Selection UI (3 tests) -->
    <test name="Smoke - Site Selection UI">
        <classes>
            <class name="com.egalvanic.tests.SiteSelectionTest">
                <methods>
                    <include name="TC_SS_001_verifySelectSiteScreenUIElements"/>
                    <include name="TC_SS_007_verifySearchBarPlaceholderText"/>
                    <include name="TC_SS_018_verifySitesButtonOpensSelectSite"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 3: Asset UI (2 tests) -->
    <test name="Smoke - Asset UI">
        <classes>
            <class name="com.egalvanic.tests.Asset_Phase1_Test">
                <methods>
                    <include name="ATS_ECR_02_verifyAllUIFieldsAreVisible"/>
                    <include name="ATS_ECR_06_verifyNameMandatoryValidation"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 4: Location UI (2 tests) -->
    <test name="Smoke - Location UI">
        <classes>
            <class name="com.egalvanic.tests.LocationTest">
                <methods>
                    <include name="TC_NB_003_verifySaveButtonStateChanges"/>
                    <include name="TC_NB_004_verifyBuildingNameAcceptsValidInput"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 5: Connections UI (2 tests) -->
    <test name="Smoke - Connections UI">
        <classes>
            <class name="com.egalvanic.tests.Connections_Test">
                <methods>
                    <include name="TC_CONN_002_verifyConnectionsScreenHeader"/>
                    <include name="TC_CONN_004_verifyConnectionListDisplaysAllConnections"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- ============================================================ -->
    <!-- PHASE 2: CRUD OPERATIONS (requires login) - 12 tests        -->
    <!-- ============================================================ -->

    <!-- Module 6: Login Flow (1 test) - Establishes logged-in session for CRUD tests -->
    <test name="Smoke - Login Flow">
        <classes>
            <class name="com.egalvanic.tests.AuthenticationTest">
                <methods>
                    <include name="TC25_verifyValidLoginNavigatesToDashboard"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 7: Asset CRUD (4 tests) - Create, Read, Update, Delete -->
    <test name="Smoke - Asset CRUD">
        <classes>
            <class name="com.egalvanic.tests.Asset_Phase1_Test">
                <methods>
                    <include name="ATS_ECR_31_verifySaveAssetWithValidData"/>
                    <include name="ATS_ECR_37_verifyAssetAppearsInAssetList"/>
                    <include name="ATS_EAD_01_openEditAssetDetailsScreen"/>
                </methods>
            </class>
            <class name="com.egalvanic.tests.Asset_Phase5_Test">
                <methods>
                    <include name="BUG_DELETE_01_deleteRequiresConfirmation"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 8: Location CRUD (4 tests) - Create, Read, Update, Delete Building -->
    <test name="Smoke - Location CRUD">
        <classes>
            <class name="com.egalvanic.tests.LocationTest">
                <methods>
                    <include name="TC_NB_010_verifySuccessfulBuildingCreation"/>
                    <include name="TC_BL_001_verifyBuildingListDisplaysBuildings"/>
                    <include name="TC_EB_002_verifyBuildingNameCanBeUpdated"/>
                    <include name="TC_DB_001_verifyBuildingDeletedImmediatelyOnTap"/>
                </methods>
            </class>
        </classes>
    </test>

    <!-- Module 9: Connection CRUD (3 tests) - Create, Verify, Delete -->
    <test name="Smoke - Connection CRUD">
        <classes>
            <class name="com.egalvanic.tests.Connections_Test">
                <methods>
                    <include name="TC_CONN_037_verifyCreateConnectionSuccessfully"/>
                    <include name="TC_CONN_038_verifyNewConnectionAppearsInList"/>
                    <include name="TC_CONN_051_verifyConnectionDeletedSuccessfully"/>
                </methods>
            </class>
        </classes>
    </test>

</suite>
